<% layout("/layouts/boilerplate") %>

<div class="container px-4 md:px-6 mx-auto py-8 md:py-12">
  <div class="flex flex-col items-center justify-center space-y-4 text-center mb-8">
    <h1 class="text-3xl font-bold tracking-tighter sm:text-4xl md:text-5xl">Shelters</h1>
    <p class="max-w-[700px] text-gray-500 md:text-xl/relaxed lg:text-base/relaxed xl:text-xl/relaxed">
      Browse our partner shelters and rescue organizations.
    </p>
  </div>


  <!-- Shelter grid -->
  <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
    <% shelters.forEach((shelter) => { %>
      <div class="overflow-hidden rounded-lg border bg-white shadow-sm transition-all hover:shadow-md">
        <figure>
          <img
            src="<%= shelter.image %>"
            alt="Image of <%= shelter.name %>, a <%= shelter.location %> location"
            class="aspect-[16/9] w-full object-cover"
          />
        </figure>
        
        <div class="p-6 space-y-4">
          <div class="space-y-2">
            <h3 class="text-xl font-bold"><%= shelter.name %></h3>
            <div class="flex items-center text-sm text-gray-500">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1 h-4 w-4">
                <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path>
                <circle cx="12" cy="10" r="3"></circle>
              </svg>
              <span><%= shelter.location %></span>
            </div>
          </div>
          
          <p class="text-sm text-gray-700 line-clamp-3"><%= shelter.description %></p>
          
          <div class="flex items-center text-sm font-medium">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2 h-5 w-5 text-gray-500">
              <path d="M12 2c-3.69 0-5.11.61-7.34 1.48A4.08 4.08 0 0 0 2 7.32v7.04a4.08 4.08 0 0 0 2.66 3.84c2.23.87 3.65 1.48 7.34 1.48s5.11-.61 7.34-1.48A4.08 4.08 0 0 0 22 14.36V7.32a4.08 4.08 0 0 0-2.66-3.84C17.11 2.61 15.69 2 12 2Z"></path>
              <path d="m9 11 3 3 3-3"></path>
              <path d="M12 14v5"></path>
              <path d="M12 7v1"></path>
            </svg>
            <span>Cats Available: <strong><%= shelter.cats.length %></strong></span>
          </div>
          
          <a 
            href="/shelters/<%= shelter._id %>" 
            aria-label="View more details about <%= shelter.name %>"
            class="inline-flex w-full items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2"
          >
            View Details
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="ml-2 h-4 w-4">
              <path d="M5 12h14"></path>
              <path d="m12 5 7 7-7 7"></path>
            </svg>
          </a>
        </div>
      </div>
    <% }) %>
  </div>

  <!-- Empty state -->
  <% if (shelters.length === 0) { %>
    <div class="flex flex-col items-center justify-center py-12 text-center">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-16 w-16 text-gray-400 mb-4">
        <path d="M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Z"></path>
        <path d="m3 9 2.45-4.9A2 2 0 0 1 7.24 3h9.52a2 2 0 0 1 1.8 1.1L21 9"></path>
        <path d="M12 3v6"></path>
      </svg>
      <h3 class="text-lg font-medium mb-2">No shelters found</h3>
      <p class="text-gray-500 max-w-md mb-6">There are currently no shelters in our database. Add a new shelter to get started.</p>
      <a 
        href="/shelters/new" 
        class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2 h-4 w-4">
          <path d="M5 12h14"></path>
          <path d="M12 5v14"></path>
        </svg>
        Add First Shelter
      </a>
    </div>
  <% } %>

  <!-- Pagination (if needed) -->
  <% if (shelters.length > 0) { %>
    <div class="flex items-center justify-center space-x-2 mt-8">
      <button class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 w-10" disabled>
        <span class="sr-only">Previous</span>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4">
          <path d="m15 18-6-6 6-6"></path>
        </svg>
      </button>
      <button class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 w-10" aria-current="page">
        1
      </button>
      <button class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 w-10">
        <span class="sr-only">Next</span>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4">
          <path d="m9 18 6-6-6-6"></path>
        </svg>
      </button>
    </div>
  <% } %>
</div>