<% layout("/layouts/boilerplate") %>

<div class="container px-4 md:px-6 mx-auto py-8 md:py-12">
  <div class="flex items-center gap-2 mb-6">
    <a href="/cats" class="flex items-center text-sm text-gray-500 hover:text-gray-900">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1 h-4 w-4">
        <path d="m15 18-6-6 6-6"></path>
      </svg>
      Back to Cats
    </a>
  </div>

  <div class="grid gap-8 lg:grid-cols-2 lg:gap-12">
    <!-- Left column: Image and basic info -->
    <div class="space-y-6">
      <figure class="overflow-hidden rounded-lg">
        <img
          src="<%= cat.image %>"
          alt="Image of <%= cat.name %>, a <%= cat.breed %> breed cat."
          class="aspect-[4/3] w-full object-cover rounded-lg"
        />
        <figcaption class="mt-2 text-sm text-gray-500"><%= cat.description %></figcaption>
      </figure>

      <div class="flex flex-wrap gap-2">
        <span class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium"><%= cat.breed %></span>
        <span class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium"><%= cat.gender %></span>
        <span class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium"><%= cat.age %> years</span>
        
        <% if(cat.good_with_children) { %>
          <span class="inline-flex items-center rounded-full bg-green-100 text-green-800 px-2.5 py-0.5 text-xs font-medium">Good with Children</span>
        <% } else { %>
          <span class="inline-flex items-center rounded-full bg-red-100 text-red-800 px-2.5 py-0.5 text-xs font-medium">Not Good with Children</span>
        <% } %>
        
        <% if(cat.good_with_cats) { %>
          <span class="inline-flex items-center rounded-full bg-green-100 text-green-800 px-2.5 py-0.5 text-xs font-medium">Good with Cats</span>
        <% } else { %>
          <span class="inline-flex items-center rounded-full bg-red-100 text-red-800 px-2.5 py-0.5 text-xs font-medium">Not Good with Cats</span>
        <% } %>
        
        <% if(cat.good_with_dogs) { %>
          <span class="inline-flex items-center rounded-full bg-green-100 text-green-800 px-2.5 py-0.5 text-xs font-medium">Good with Dogs</span>
        <% } else { %>
          <span class="inline-flex items-center rounded-full bg-red-100 text-red-800 px-2.5 py-0.5 text-xs font-medium">Not Good with Dogs</span>
        <% } %>
      </div>
    </div>

    <!-- Right column: Details and tabs -->
    <div class="space-y-6">
      <div class="space-y-2">
        <h1 class="text-3xl font-bold tracking-tight"><%= cat.name %></h1>
        <div class="flex items-center text-sm text-gray-500">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1 h-4 w-4">
            <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path>
            <circle cx="12" cy="10" r="3"></circle>
          </svg>
          <% if(cat.shelter) { %>
            <span><%= cat.shelter.name %> â€¢ <%= cat.shelter.location %></span>
          <% } else { %>
            <span>Shelter information not available</span>
          <% } %>
        </div>
      </div>

      <!-- Tabs -->
      <div class="border-b">
        <nav class="flex gap-4" aria-label="Tabs">
          <button 
            onclick="showSection('about')" 
            class="tab-button border-b-2 border-transparent px-1 pb-4 text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700"
            id="about-tab"
          >
            About
          </button>
          <button 
            onclick="showSection('details')" 
            class="tab-button border-b-2 border-transparent px-1 pb-4 text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700"
            id="details-tab"
          >
            Details
          </button>
          <button 
            onclick="showSection('story')" 
            class="tab-button border-b-2 border-transparent px-1 pb-4 text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700"
            id="story-tab"
          >
            Story
          </button>
        </nav>
      </div>

      <!-- Tab content -->
      <div id="about" class="tab-content space-y-4">
        <p class="text-gray-700"><%= cat.description %></p>
      </div>

      <div id="details" class="tab-content space-y-4 hidden">
        <section aria-labelledby="cat-details">
          <div class="grid grid-cols-2 gap-4 text-sm">
            <div class="space-y-1">
              <p class="font-medium">Color</p>
              <p class="text-gray-500"><%= cat.color %></p>
            </div>
            <div class="space-y-1">
              <p class="font-medium">Weight</p>
              <p class="text-gray-500"><%= cat.weight %> lbs</p>
            </div>
            <div class="space-y-1">
              <p class="font-medium">Spayed/Neutered</p>
              <p class="text-gray-500"><%= cat.spayed_neutered ? 'Yes' : 'No' %></p>
            </div>
            <div class="space-y-1">
              <p class="font-medium">Vaccinated</p>
              <p class="text-gray-500"><%= cat.vaccinated ? 'Yes' : 'No' %></p>
            </div>
            <div class="space-y-1">
              <p class="font-medium">Microchipped</p>
              <p class="text-gray-500"><%= cat.microchipped ? 'Yes' : 'No' %></p>
            </div>
            <div class="space-y-1">
              <p class="font-medium">House Trained</p>
              <p class="text-gray-500"><%= cat.house_trained ? 'Yes' : 'No' %></p>
            </div>
            <div class="space-y-1">
              <p class="font-medium">Activity Level</p>
              <p class="text-gray-500"><%= cat.activity_level %></p>
            </div>
            <div class="space-y-1">
              <p class="font-medium">Coat Length</p>
              <p class="text-gray-500"><%= cat.coat_length %></p>
            </div>
            <div class="space-y-1">
              <p class="font-medium">Special Needs</p>
              <p class="text-gray-500"><%= cat.special_needs ? 'Yes' : 'No' %></p>
            </div>
            <div class="space-y-1">
              <p class="font-medium">Good with Children</p>
              <p class="text-gray-500"><%= cat.good_with_children ? 'Yes' : 'No' %></p>
            </div>
            <div class="space-y-1">
              <p class="font-medium">Good with Cats</p>
              <p class="text-gray-500"><%= cat.good_with_cats ? 'Yes' : 'No' %></p>
            </div>
            <div class="space-y-1">
              <p class="font-medium">Good with Dogs</p>
              <p class="text-gray-500"><%= cat.good_with_dogs ? 'Yes' : 'No' %></p>
            </div>
            <div class="space-y-1 col-span-2">
              <p class="font-medium">Adoption Fee</p>
              <p class="text-gray-500">$<%= cat.adoption_fee %></p>
            </div>
          </div>
        </section>
      </div>

      <div id="story" class="tab-content space-y-4">
        <p class="text-gray-700"><%= cat.story %></p>
      </div>

      <!-- Shelter information -->
      <% if(cat.shelter) { %>
      <div class="border-t pt-6 mt-6">
        <section aria-labelledby="shelter-info" class="space-y-4">
          <h2 class="text-lg font-medium">Shelter Information</h2>
          <ul id="shelter-info" class="space-y-2 text-sm">
            <li><strong>Shelter Name:</strong> <%= cat.shelter.name %></li>
            <li><strong>Location:</strong> <%= cat.shelter.location %></li>
            <li><strong>Phone:</strong> <%= cat.shelter.phone %></li>
            <li><strong>Email:</strong> <%= cat.shelter.email %></li>
          </ul>
          <a 
            href="/shelters/<%= cat.shelter._id %>" 
            class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2"
          >
            Visit Shelter Page
          </a>
        </section>
      </div>
      <% } %>

      <!-- Action buttons -->
      <div class="flex flex-col gap-4 sm:flex-row">
      
        <a 
          href="/cats/<%= cat._id %>/application/new"
          class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2 w-full sm:w-auto"
        >
          Start Adoption Process
        </a>
        
        <a 
          href="/cats" 
          class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2 w-full sm:w-auto"
        >
          Go Back
        </a>
      </div>
    </div>
  </div>
</div>

<script>
    function showSection(sectionId) {
      // Hide all sections
      document.getElementById("about").style.display = "none";
      document.getElementById("details").style.display = "none";
      document.getElementById("story").style.display = "none";

      // Show the selected section
      document.getElementById(sectionId).style.display = "block";
    }

        // This runs when the page first loads
        window.onload = function () {
      showSection('about'); // Show only the "About" section by default
    };
  </script>